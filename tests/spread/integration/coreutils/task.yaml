summary: Integration tests for coreutils

execute: |
  # test expr binary
  rootfs_expr="$(install-slices coreutils_expr)"
  chroot "$rootfs_expr" expr --version

  # test mkdir binary
  rootfs_mkdir="$(install-slices coreutils_mkdir)"
  chroot "$rootfs_mkdir" mkdir test_dir
  test -d "$rootfs_mkdir/test_dir"

  # test env
  rootfs_env="$(install-slices coreutils_env)"
  chroot "$rootfs_env" env --version

  # test echo binary
  rootfs_echo="$(install-slices coreutils_echo)"
  chroot "$rootfs_echo" echo "Hello, World!"

  # test ln binary
  rootfs_ln="$(install-slices coreutils_ln-utility)"
  touch "$rootfs_ln/test_file"
  chroot "$rootfs_ln" ln -s test_file test_link
  test -L "$rootfs_ln/test_link"

  # test rm binary
  rootfs_rm="$(install-slices coreutils_rm-utility)"
  touch "$rootfs_rm/test_file"
  chroot "$rootfs_rm" rm test_file
  test ! -e "$rootfs_rm/test_file"


