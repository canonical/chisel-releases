summary: Integration tests for fontconfig

execute: |
  rootfs="$(install-slices bash_bins fontconfig_bins coreutils_bins fonts-dejavu-core_fonts)"

  mkdir -p $rootfs/tmp
  mkdir -p $rootfs/dev

  [[ $(chroot "$rootfs" /usr/bin/bash -c 'HOME=/tmp fc-cache && echo $?') -eq 0 ]]
  [[ $(chroot "$rootfs" /usr/bin/bash -c 'HOME=/tmp fc-cat 1>/dev/null 2>/dev/null && echo $?') -eq 0 ]]
  [[ $(chroot "$rootfs" /usr/bin/bash -c 'HOME=/tmp fc-conflist 2>/dev/null | wc -l') -gt 0 ]]
  [[ $(chroot "$rootfs" /usr/bin/bash -c 'HOME=/tmp fc-list 2>/dev/null | wc -l') -gt 0 ]]
  [[ $(chroot "$rootfs" /usr/bin/bash -c 'HOME=/tmp fc-match') == 'DejaVuSans.ttf: "DejaVu Sans" "Book"' ]]
  [[ $(chroot "$rootfs" /usr/bin/bash -c 'HOME=/tmp fc-query /usr/share/fonts/truetype/dejavu/DejaVuSans.ttf 1>/dev/null 2>/dev/null && echo $?') -eq 0 ]]
  [[ $(chroot "$rootfs" /usr/bin/bash -c 'HOME=/tmp fc-scan /usr/share/fonts/truetype/dejavu/ 1>/dev/null && echo $?') -eq 0 ]]
