summary: Integration tests for xfonts-utils

execute: |
  rootfs="$(install-slices xfonts-utils_bins bash_bins)"

  mkdir -p $rootfs/tmp/fonts
  mkdir -p $rootfs/dev
  cp sample.bdf $rootfs/tmp/fonts/sample.bdf

  chroot "$rootfs" bdftopcf /tmp/fonts/sample.bdf 1>/dev/null 2>/dev/null
  chroot "$rootfs" /usr/bin/bash -c "bdftruncate 0x3200 </tmp/fonts/sample.bdf 1>/dev/null"
  chroot "$rootfs" /usr/bin/bash -c "fonttosfnt -o /tmp/test.ttf /tmp/fonts/sample.bdf"

  # it is a script calling mkfontscale and it does require
  # /bin/sh, so using bash instead
  chroot "$rootfs" /usr/bin/bash -c "bash mkfontdir"

  chroot "$rootfs" mkfontscale

  cp 6x13.bdf $rootfs/tmp/fonts/6x13.bdf
  chroot "$rootfs" ucs2any /tmp/fonts/6x13.bdf
