summary: Integration tests for login

execute: |
  rootfs="$(install-slices login_bins bash_bins base-files_base base-passwd_data)"
  mkdir "$rootfs"/dev
  cp "$rootfs"/bin/bash "$rootfs"/bin/sync
  touch "$rootfs"/dev/log
  touch "$rootfs"/var/log/faillog
  touch "$rootfs"/var/log/lastlog
  chroot "$rootfs" nologin | grep "not available"
  chroot "$rootfs" faillog
  chroot "$rootfs" lastlog
  chroot "$rootfs" newgrp root
  chroot "$rootfs" sg root
