name: Tests

on:
  push:
    branches:
      - "ubuntu-*"
  pull_request:
    branches:
      - "ubuntu-*"
  schedule:
    # Run at 00:00 every day.
    # Ref: https://man7.org/linux/man-pages/man5/crontab.5.html
    - cron: "0 0 * * *"

jobs:
  installability:
    name: Installability
    strategy:
      fail-fast: false
      matrix:
        ARCH: [amd64, arm64, armhf, i386, ppc64el, riscv64, s390x]
    uses: canonical/chisel-releases/.github/workflows/install-slices.yaml@main
    with:
      arch: ${{ matrix.ARCH }}
      install-all: ${{ github.event_name == 'schedule' }}
