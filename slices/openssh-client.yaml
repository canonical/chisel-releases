package: openssh-client

essential:
  - openssh-client_copyright

slices:
  bins:
    # openssh-client depends on adduser as well to create or update
    # the ssh agent user during package install - however we
    # don't support this currently so adduser is not added here.
    # Likewise, the init-system-helpers dependency is for the postinst
    # script to configure systemd for the socket.
    essential:
      - libc6_libs
      - libedit2_libs
      - libfido2-1_libs
      - libgssapi-krb5-2_libs
      - libselinux1_libs
      - libssl3t64_libs
      - passwd_config
      - zlib1g_libs
    contents:
      /usr/bin/scp:
      /usr/bin/sftp:
      /usr/bin/ssh:
      /usr/bin/ssh-add:
      /usr/bin/ssh-agent:
      /usr/bin/ssh-keygen:
      /usr/bin/ssh-keyscan:
      /usr/lib/openssh/ssh-keysign:
      /usr/lib/openssh/ssh-pkcs11-helper:
      /usr/lib/openssh/ssh-sk-helper:

  config:
    contents:
      /etc/ssh/ssh_config:
      /etc/ssh/ssh_config.d/:
      /usr/lib/tmpfiles.d/openssh-client.conf:

  scripts:
    essential:
      - openssh-client_ssh-argv0
      - openssh-client_ssh-copy-id

  ssh-argv0:
    # ssh-copy-id is a shell script that needs all of these
    # None of these extra requirements are part of the openssh-client package's
    # requirements.
    essential:
      - coreutils_conditions
      - dash_bins
      - openssh-client_bins
    contents:
      /usr/bin/ssh-argv0:

  ssh-copy-id:
    # ssh-copy-id is a shell script that needs all of these
    # None of these extra requirements are part of the openssh-client package's
    # requirements.
    essential:
      - coreutils_changing-file-attributes
      - coreutils_expr
      - coreutils_file-name-manipulation
      - coreutils_operating-on-characters
      - coreutils_output-of-entire-files
      - coreutils_output-of-parts-of-files
      - coreutils_rm-utility
      - coreutils_summarizing-files
      - dash_bins
      - grep_bins
      - openssh-client_bins
      - sed_bins
    contents:
      /usr/bin/ssh-copy-id:

  services:
    contents:
      /usr/lib/systemd/user/graphical-session-pre.target.wants/ssh-agent.service:
      /usr/lib/systemd/user/ssh-agent.service:
      /usr/lib/systemd/user/ssh-agent.socket:

  copyright:
    contents:
      /usr/share/doc/openssh-client/copyright:
