package: e2fsprogs

essential:
  - e2fsprogs_copyright

slices:
  # Core filesystem checking and repair tools
  fsck:
    essential:
      - libblkid1_libs
      - libc6_libs
      - libcom-err2_libs
      - libext2fs2t64_libs
      - libuuid1_libs
    contents:
      /usr/sbin/e2fsck:
      /usr/sbin/fsck.ext2:
      /usr/sbin/fsck.ext3:
      /usr/sbin/fsck.ext4:

  # Filesystem creation tools
  mkfs:
    essential:
      - libblkid1_libs
      - libc6_libs
      - libcom-err2_libs
      - libext2fs2t64_libs
      - libuuid1_libs
      - e2fsprogs_config
    contents:
      /usr/sbin/mke2fs:
      /usr/sbin/mkfs.ext2:
      /usr/sbin/mkfs.ext3:
      /usr/sbin/mkfs.ext4:

  # Filesystem tuning and maintenance
  tune:
    essential:
      - libblkid1_libs
      - libc6_libs
      - libcom-err2_libs
      - libext2fs2t64_libs
      - libuuid1_libs
    contents:
      /usr/sbin/tune2fs:
      /usr/sbin/e2label:
      /usr/sbin/resize2fs:

  # Debugging and diagnostic tools
  debug:
    essential:
      - libblkid1_libs
      - libc6_libs
      - libcom-err2_libs
      - libext2fs2t64_libs
      - libss2_libs
      - libuuid1_libs
    contents:
      /usr/sbin/debugfs:
      /usr/sbin/dumpe2fs:
      /usr/sbin/e2freefrag:
      /usr/sbin/e2image:
      /usr/sbin/e2mmpstatus:
      /usr/sbin/badblocks:

  # File attribute tools
  attr:
    essential:
      - libc6_libs
      - libcom-err2_libs
    contents:
      /usr/bin/chattr:
      /usr/bin/lsattr:

  # Advanced features
  advanced:
    essential:
      - libc6_libs
      - libext2fs2t64_libs
    contents:
      /usr/sbin/e2undo:
      /usr/sbin/e4crypt:
      /usr/sbin/e4defrag:
      /usr/sbin/filefrag:
      /usr/sbin/mklost+found:

  # Scrubbing/integrity checking
  scrub:
    essential:
      - e2fsprogs_fsck
      - e2fsprogs_config
      - systemd_services
    contents:
      /usr/sbin/e2scrub:
      /usr/sbin/e2scrub_all:
      /usr/libexec/e2fsprogs/e2scrub_all_cron:
      /usr/libexec/e2fsprogs/e2scrub_fail:

  config:
    contents:
      /etc/e2scrub.conf:
      /etc/mke2fs.conf:

  services:
    essential:
      - e2fsprogs_scrub
      - logsave_bins
    contents:
      /etc/cron.d/e2scrub_all:
      /usr/lib/systemd/system/e2scrub@.service:
      /usr/lib/systemd/system/e2scrub_all.service:
      /usr/lib/systemd/system/e2scrub_all.timer:
      /usr/lib/systemd/system/e2scrub_fail@.service:
      /usr/lib/systemd/system/e2scrub_reap.service:
      /usr/lib/udev/rules.d/64-ext4.rules:
      /usr/lib/udev/rules.d/96-e2scrub.rules:

  # Standard installation - includes all common tools
  standard:
    essential:
      - e2fsprogs_fsck
      - e2fsprogs_mkfs
      - e2fsprogs_tune
      - e2fsprogs_attr
      - e2fsprogs_debug
      - e2fsprogs_advanced
      - e2fsprogs_services

  copyright:
    contents:
      /usr/share/doc/e2fsprogs/copyright:
