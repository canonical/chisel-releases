package: php8.4-common

essential:
  - php8.4-common_copyright

slices:
  libs:
    essential:
      - libc6_libs
      - libffi8_libs
      - libssl3t64_libs
      - php8.4-common_config
    contents:
      /usr/lib/php/*/calendar.so:
      /usr/lib/php/*/ctype.so:
      /usr/lib/php/*/exif.so:
      /usr/lib/php/*/ffi.so:
      /usr/lib/php/*/fileinfo.so:
      /usr/lib/php/*/ftp.so:
      /usr/lib/php/*/gettext.so:
      /usr/lib/php/*/iconv.so:
      /usr/lib/php/*/pdo.so:
      /usr/lib/php/*/phar.so:
      /usr/lib/php/*/posix.so:
      /usr/lib/php/*/shmop.so:
      /usr/lib/php/*/sockets.so:
      /usr/lib/php/*/sysvmsg.so:
      /usr/lib/php/*/sysvsem.so:
      /usr/lib/php/*/sysvshm.so:
      /usr/lib/php/*/tokenizer.so:

      # Required for session_start() function. It is actually added
      # by php-common, but created here instead to prevent from
      # adding contents that don't belong to the php core slice.
      /var/lib/php/sessions/: { make: true }

  config:
    contents:
      # PHP contain multiple modules that enable different functions
      # (i.e date() by calendar.ini), these modules need to be copied
      # into /mods-available so they can be enabled afterwards via
      # phpenmod. This logic can be found in the maintainer scripts.
      /etc/php/8.4/mods-available/calendar.ini:
        { copy: /usr/share/php8.4-common/common/calendar.ini }
      /etc/php/8.4/mods-available/ctype.ini:
        { copy: /usr/share/php8.4-common/common/ctype.ini }
      /etc/php/8.4/mods-available/exif.ini:
        { copy: /usr/share/php8.4-common/common/exif.ini }
      /etc/php/8.4/mods-available/ffi.ini:
        { copy: /usr/share/php8.4-common/common/ffi.ini }
      /etc/php/8.4/mods-available/fileinfo.ini:
        { copy: /usr/share/php8.4-common/common/fileinfo.ini }
      /etc/php/8.4/mods-available/ftp.ini:
        { copy: /usr/share/php8.4-common/common/ftp.ini }
      /etc/php/8.4/mods-available/gettext.ini:
        { copy: /usr/share/php8.4-common/common/gettext.ini }
      /etc/php/8.4/mods-available/iconv.ini:
        { copy: /usr/share/php8.4-common/common/iconv.ini }
      /etc/php/8.4/mods-available/pdo.ini:
        { copy: /usr/share/php8.4-common/common/pdo.ini }
      /etc/php/8.4/mods-available/phar.ini:
        { copy: /usr/share/php8.4-common/common/phar.ini }
      /etc/php/8.4/mods-available/posix.ini:
        { copy: /usr/share/php8.4-common/common/posix.ini }
      /etc/php/8.4/mods-available/shmop.ini:
        { copy: /usr/share/php8.4-common/common/shmop.ini }
      /etc/php/8.4/mods-available/sockets.ini:
        { copy: /usr/share/php8.4-common/common/sockets.ini }
      /etc/php/8.4/mods-available/sysvmsg.ini:
        { copy: /usr/share/php8.4-common/common/sysvmsg.ini }
      /etc/php/8.4/mods-available/sysvsem.ini:
        { copy: /usr/share/php8.4-common/common/sysvsem.ini }
      /etc/php/8.4/mods-available/sysvshm.ini:
        { copy: /usr/share/php8.4-common/common/sysvshm.ini }
      /etc/php/8.4/mods-available/tokenizer.ini:
        { copy: /usr/share/php8.4-common/common/tokenizer.ini }
      /usr/lib/php/8.4/php.ini-production:

  copyright:
    contents:
      /usr/share/doc/php8.4-common/copyright:
