package: iproute2

essential:
  - iproute2_copyright

slices:
  # iproute2 is a utility package which typically could be split into
  # utility-specific slices. The `bins` slice however brings in all the
  # utilities for cases where iproute2 is used as a dependency for another
  # package (eg. nginx), where we can't easily know which utilities are
  # actually going to be needed.
  bins:
    # Leaving the debconf dependency out as we don't currently need pkg mgmt.
    # Also, debconf is used by the pkg's maintainer scripts, which are handled
    # differently in Chisel.
    essential:
      - iproute2_config
      - iproute2_dist
      - libcap2-bin_bins
    contents:
      /usr/bin/ctstat:
      /usr/bin/ip:
      /usr/bin/lnstat:
      /usr/bin/nstat:
      /usr/bin/rdma:
      /usr/bin/routel:
      /usr/bin/rtstat:
      /usr/bin/ss:
      /usr/include/iproute2/bpf_elf.h:
      /usr/sbin/arpd:
      /usr/sbin/bridge:
      /usr/sbin/dcb:
      /usr/sbin/devlink:
      /usr/sbin/genl:
      /usr/sbin/ip:
      /usr/sbin/rtacct:
      /usr/sbin/rtmon:
      # "tc" is an obvious candidate for getting its own "traffic-control"
      # slice in the future, if needed.
      /usr/sbin/tc:
      /usr/sbin/tipc:
      /usr/sbin/vdpa:

  config:
    # Corresponds to the pkg's conffiles
    contents:
      /usr/share/iproute2/bpf_pinning:
      /usr/share/iproute2/ematch_map:
      /usr/share/iproute2/group:
      /usr/share/iproute2/nl_protos:
      /usr/share/iproute2/rt_dsfield:
      /usr/share/iproute2/rt_protos:
      /usr/share/iproute2/rt_realms:
      /usr/share/iproute2/rt_scopes:
      /usr/share/iproute2/rt_tables:

  dist:
    contents:
      /usr/lib/*-linux-*/tc/experimental.dist:
      /usr/lib/*-linux-*/tc/normal.dist:
      /usr/lib/*-linux-*/tc/pareto.dist:
      /usr/lib/*-linux-*/tc/paretonormal.dist:

  copyright:
    contents:
      /usr/share/doc/iproute2/copyright:
