package: sudo

essential:
  - sudo_copyright

slices:
  bins:
    essential:
      - libapparmor1_libs
      - libaudit1_libs
      - libc6_libs
      - libpam-modules_libs
      - libpam0g_libs
      - libselinux1_libs
      - libssl3t64_libs
      - sudo_config
      - sudo_libs
      - zlib1g_libs
    # sudo, visudo and sudoedit are symlinked to their .ws variants
    # to mimic the behavior of postinst which uses `update-alternatives`
    contents:
      /usr/bin/cvtsudoers.ws:
      /usr/bin/sudo: {symlink: sudo.ws}
      /usr/bin/sudo.ws:
      /usr/bin/sudoedit: {symlink: sudoedit.ws}
      /usr/bin/sudoedit.ws:
      /usr/bin/sudoreplay.ws:
      /usr/libexec/sudo/sesh:
      /usr/sbin/sudo_logsrvd:
      /usr/sbin/sudo_sendlog.ws:
      /usr/sbin/visudo: {symlink: visudo.ws}
      /usr/sbin/visudo.ws:

  config:
    contents:
      /etc/pam.d/sudo:
      /etc/pam.d/sudo-i:
      /etc/sudo.conf:
      /etc/sudo_logsrvd.conf:
      /etc/sudoers:
      /usr/lib/tmpfiles.d/sudo.conf:

  services:
    essential:
      - sudo_bins
    contents:
      /usr/lib/systemd/system/sudo.service:

  libs:
    contents:
      /usr/libexec/sudo/audit_json.so:
      /usr/libexec/sudo/group_file.so:
      /usr/libexec/sudo/libsudo_util.so*:
      /usr/libexec/sudo/sudo_intercept.so:
      /usr/libexec/sudo/sudo_noexec.so:
      /usr/libexec/sudo/sudoers.so:
      /usr/libexec/sudo/system_group.so:

  copyright:
    contents:
      /usr/share/doc/sudo/copyright:
