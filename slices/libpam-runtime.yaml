package: libpam-runtime

essential:
  - libpam-runtime_copyright

slices:
  # perl scripts that rely on debconf to properly work and discover
  # plugins/rules in /usr/share/pam-configs/*
  # /usr/sbin/pam-auth-update:
  # /usr/sbin/pam_getenv:
  # The libpam-runtime package caries nothing that can actually be directly
  # used by other packages. The files that are used, are generated by "usr/sbin/pam-auth-update"
  # based on input from /usr/share/pam-configs/* and outputs five different files into
  # /etc/pam.d/common-{account,auth,password,session,session-non-interactive}. The contents
  # of those are directly derived from the contents of the pam-configs.
  # Other packages can carry these pam-configs too, and usually invoke pam-auth-update
  # to regenerate these five files mentioned.
  # pam-config and pam-defaults slices are only used for generation, and are useless
  # for anything else.

  # Applications that need libpam for now should just rely on the config and var slices for now -
  # until appropriate solution for emulating what pam-auth-update can do (or maybe something else).
  bins:
    essential:
      - libpam-modules_config
      - libpam-runtime_config
      - libpam-runtime_pam-config
      - libpam-runtime_pam-defaults
      - libpam-runtime_var
    contents:
      /usr/sbin/pam-auth-update:
      /usr/sbin/pam_getenv:

  config:
    contents:
      /etc/pam.conf:
      /etc/pam.d/other:

  # folders expected by libpam to exist
  var:
    contents:
      /var/lib/pam/:

  # Used by pam-auth-update to generate the pam.d/ config
  # files inside etc. However pam-auth-update relies on
  # debconf to actually work and discover these packages.
  pam-config:
    contents:
      /usr/share/pam-configs/**:

  # default templates for the /etc/pam.d files that are used by
  # pam-auth-update to generate the /etc/pam.d versions based on
  # additional plugs in /usr/share/pam-configs/*.
  pam-defaults:
    contents:
      /usr/share/pam/common-account:
      /usr/share/pam/common-account.md5sums:
      /usr/share/pam/common-auth:
      /usr/share/pam/common-auth.md5sums:
      /usr/share/pam/common-password:
      /usr/share/pam/common-password.md5sums:
      /usr/share/pam/common-session:
      /usr/share/pam/common-session-noninteractive:
      /usr/share/pam/common-session-noninteractive.md5sums:
      /usr/share/pam/common-session.md5sums:

  copyright:
    contents:
      /usr/share/doc/libpam-runtime/copyright:
