package: dpkg

essential:
  - dpkg_copyright

slices:
  bins:
    essential:
      - coreutils_rm-utility
      - diffutils_bins  # used by dpkg -i
      - dpkg_config
      - dpkg_scripts
      - dpkg_tables
      - dpkg_var
      - libbz2-1.0_libs
      - libc-bin_ldconfig
      - libc6_libs
      - liblzma5_libs
      - libmd0_libs
      - libselinux1_libs
      - libzstd1_libs
      - tar_tar
      - zlib1g_libs
    contents:
      /usr/bin/dpkg:
      /usr/bin/dpkg-deb:
      /usr/bin/dpkg-divert:
      /usr/bin/dpkg-maintscript-helper:
      /usr/bin/dpkg-query:
      /usr/bin/dpkg-realpath:
      /usr/bin/dpkg-split:
      /usr/bin/dpkg-statoverride:
      /usr/bin/dpkg-trigger:
      /usr/bin/update-alternatives:
      /usr/libexec/dpkg/*:
      /usr/sbin/start-stop-daemon:

  copyright:
    contents:
      /usr/share/doc/dpkg/copyright:

  config:
    contents:
      /etc/dpkg/dpkg.cfg:
      /etc/dpkg/dpkg.cfg.d/:

  locales:
    essential:
      - dpkg_bins
    contents:
      /usr/share/locale/**/dpkg.mo:

  scripts:
    essential:
      - coreutils_echo
    contents:
      # Note: This file defines the color scheme used by dpkg.
      # It is sourced by dpkg's `dpkg-maintscript-helper` script.
      /usr/share/dpkg/sh/dpkg-error.sh:

  tables:
    contents:
      /usr/share/dpkg/*table:

  var:
    # /var/log is required for dpkg to write logs to
    essential:
      - base-files_var
    # Directories that are included in the tarball because they need to exist in /var
    contents:
      /var/lib/dpkg/alternatives/:
      /var/lib/dpkg/info/:
      /var/lib/dpkg/parts/:
      /var/lib/dpkg/updates/:

  maintscript-support:
    essential:
      - base-files_bin
      - coreutils_bins
      - dpkg_bins
      - sed_bins
